const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-vK34s0DD.js","./index-C3Re8InM.js","./@vue-_BCsYqm-.js","./element-plus-CoQd9HEf.js","./lodash-es-DCh--ulG.js","./@vueuse-DKZ1O7gq.js","./@element-plus-DpD46RjY.js","./@sxzz-CpAfbxx4.js","./@ctrl-D2oWfImC.js","./dayjs-Cud5yAXI.js","./async-validator-BTKOuuO-.js","./memoize-one-Ds0C_khL.js","./normalize-wheel-es-Vn5vHDCm.js","./@floating-ui-DT7V1Oc1.js","../css/element-plus-B3lJtvYm.css","./crypto-js-BfYQ37JU.js","./axios-DMXdiZgf.js","./vue-router-CJBOlWwF.js","./nprogress-BX4rmQ7W.js","../css/nprogress-BgDCIyLK.css","./vuex-CNGLPxA3.js","./json-bigint-D0bu8vFr.js","./bignumber.js-iDjSUVmj.js","./vue-i18n-DbMEmpqT.js","./@intlify-CZIS8eQd.js","./vue3-json-viewer-B-aZDOpp.js","../css/vue3-json-viewer-ByH33Jf7.css","./ace-builds-D9YH2WY7.js","./vue3-ace-editor-ubj-WOyx.js","./resize-observer-polyfill-CzGuHLZU.js","./sortablejs-BALiOaUQ.js","./vkbeautify-DEVEMlla.js","../css/index-CllpfDYF.css","../css/index-NxIOSn44.css"])))=>i.map(i=>d[i]);
import{_ as e,a as t}from"./index-C3Re8InM.js";import{aj as l,at as a,o,J as s,K as i,S as d,P as r,Q as m,O as n,L as p,c as u,aE as b}from"./@vue-_BCsYqm-.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-CJBOlWwF.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./sortablejs-BALiOaUQ.js";import"./vkbeautify-DEVEMlla.js";const c=e({components:{User:b((()=>t((()=>import("./index-vK34s0DD.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33]),import.meta.url)))},data(){return{depts:[],deptsProps:{label:"name",value:"id",emitPath:!1,checkStrictly:!0},form:{enabled:!0,sort:100},loading:!0,mode:"add",rules:{sort:[{required:!0,message:"请输入排序",trigger:"change"}],name:[{required:!0,message:"请输入部门名称"}]},tabId:"0",titleMap:{add:this.$t("新增部门"),edit:this.$t("编辑部门"),view:this.$t("查看部门")},visible:!1}},emits:["success","closed","mounted"],methods:{async open(e){var t;if(this.visible=!0,this.loading=!0,this.mode=e.mode,null==(t=e.row)?void 0:t.id){const t=await this.$API.sys_dept.get.post({id:e.row.id});Object.assign(this.form,t.data)}return this.loading=!1,e.tabId&&(this.tabId=e.tabId),this},async getGroup(){const e=await this.$API.sys_dept.query.post();this.depts=e.data},async submit(){if(!(await this.$refs.dialogForm.validate().catch((()=>{}))))return!1;this.loading=!0;const e="add"===this.mode?this.$API.sys_dept.create:this.$API.sys_dept.edit;try{const t=await e.post(this.form);this.$emit("success",t.data,this.mode),this.visible=!1,this.$message.success(this.$t("操作成功"))}catch{}this.loading=!1}},mounted(){this.$emit("mounted"),this.getGroup()}},[["render",function(e,t,b,c,h,f){var j;const v=l("el-cascader"),g=l("el-form-item"),y=l("el-input"),$=l("el-input-number"),_=l("el-switch"),V=l("el-form"),w=l("el-tab-pane"),I=l("user"),P=l("JsonViewer"),k=l("el-tabs"),x=l("el-button"),A=l("scDialog"),U=a("loading");return o(),s(A,{modelValue:h.visible,"onUpdate:modelValue":t[7]||(t[7]=e=>h.visible=e),title:`${h.titleMap[h.mode]}：${(null==(j=h.form)?void 0:j.id)??"..."}`,onClosed:t[8]||(t[8]=t=>e.$emit("closed")),"destroy-on-close":"","full-screen":""},{footer:i((()=>[d(x,{onClick:t[6]||(t[6]=e=>h.visible=!1)},{default:i((()=>[r(m(e.$t("取消")),1)])),_:1}),"view"!==h.mode?(o(),s(x,{key:0,disabled:h.loading,loading:h.loading,onClick:f.submit,type:"primary"},{default:i((()=>[r(m(e.$t("保存")),1)])),_:1},8,["disabled","loading","onClick"])):n("",!0)])),default:i((()=>[p((o(),u("div",null,[d(k,{modelValue:h.tabId,"onUpdate:modelValue":t[5]||(t[5]=e=>h.tabId=e),"tab-position":"top"},{default:i((()=>[d(w,{label:e.$t("基本信息")},{default:i((()=>[d(V,{disabled:"view"===h.mode,model:h.form,rules:h.rules,"label-width":"15rem",ref:"dialogForm"},{default:i((()=>[d(g,{label:e.$t("上级部门"),prop:"parentId"},{default:i((()=>[d(v,{modelValue:h.form.parentId,"onUpdate:modelValue":t[0]||(t[0]=e=>h.form.parentId=e),options:h.depts,props:h.deptsProps,"show-all-levels":!1,clearable:"",style:{width:"100%"}},null,8,["modelValue","options","props"])])),_:1},8,["label"]),d(g,{label:e.$t("部门名称"),prop:"name"},{default:i((()=>[d(y,{modelValue:h.form.name,"onUpdate:modelValue":t[1]||(t[1]=e=>h.form.name=e),placeholder:e.$t("请输入部门名称"),clearable:""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),d(g,{label:e.$t("排序"),prop:"sort"},{default:i((()=>[d($,{modelValue:h.form.sort,"onUpdate:modelValue":t[2]||(t[2]=e=>h.form.sort=e),min:0,"controls-position":"right",style:{width:"100%"}},null,8,["modelValue"])])),_:1},8,["label"]),d(g,{label:e.$t("启用"),prop:"enabled"},{default:i((()=>[d(_,{modelValue:h.form.enabled,"onUpdate:modelValue":t[3]||(t[3]=e=>h.form.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"]),d(g,{label:e.$t("备注"),prop:"summary"},{default:i((()=>[d(y,{modelValue:h.form.summary,"onUpdate:modelValue":t[4]||(t[4]=e=>h.form.summary=e),clearable:"",type:"textarea"},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["disabled","model","rules"])])),_:1},8,["label"]),"view"===h.mode?(o(),s(w,{key:0,label:e.$t("用户列表"),name:"user"},{default:i((()=>["user"===h.tabId?(o(),s(I,{key:0,"dept-id":h.form.id},null,8,["dept-id"])):n("",!0)])),_:1},8,["label"])):n("",!0),"view"===h.mode?(o(),s(w,{key:1,label:e.$t("原始数据")},{default:i((()=>[d(P,{"expand-depth":5,theme:this.$TOOL.data.get("APP_SET_DARK")||this.$CONFIG.APP_SET_DARK?"dark":"light",value:h.form,copyable:"",expanded:"",sort:""},null,8,["theme","value"])])),_:1},8,["label"])):n("",!0)])),_:1},8,["modelValue"])])),[[U,h.loading]])])),_:1},8,["modelValue","title"])}]]);export{c as default};
