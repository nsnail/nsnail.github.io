import e from"./commonPage-BVcOLrMC.js";import{s as o,n as s}from"./index--flfWqgW.js";import{n as t,p as r}from"./naFormPhone-1s2mVkIt.js";import{J as l,K as a,aj as i,o as m,S as p,a8 as d,a as n,Q as u,P as c,O as f}from"./@vue-_BCsYqm-.js";import{_ as j}from"./index-C3Re8InM.js";import"./logo-BrD2dTrf.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-CJBOlWwF.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./sortablejs-BALiOaUQ.js";import"./vkbeautify-DEVEMlla.js";const h={class:"el-form-item-msg"};const v=j({components:{commonPage:e,naFormPhone:t,scPasswordStrength:o},data(){return{loading:!1,stepActive:0,form:{passwordText2:"",passwordText:"",verifySmsCodeReq:{}},rules:{verifySmsCodeReq:{destDevice:r.mobile(this),code:r.code(this)},passwordText2:s.passwordText2((()=>this.form.passwordText)),passwordText:s.passwordText(this)}}},mounted(){},methods:{async save(){if(!(await this.$refs.form.validate().catch((()=>{}))))return!1;this.loading=!0;try{await this.$API.sys_user.resetPassword.post(this.form),this.stepActive=2}catch{}this.loading=!1},backLogin(){this.$router.push({path:"/guest/login"})}}},[["render",function(e,o,s,t,r,j){const v=i("el-step"),w=i("el-steps"),y=i("na-form-phone"),b=i("el-input"),g=i("scPasswordStrength"),x=i("el-form-item"),$=i("el-button"),T=i("el-form"),V=i("el-result"),C=i("common-page");return m(),l(C,{title:e.$t("重置密码")},{default:a((()=>[p(w,{active:r.stepActive,"finish-status":"success",simple:""},{default:a((()=>[p(v,{title:e.$t("填写新密码")},null,8,["title"]),p(v,{title:e.$t("完成重置")},null,8,["title"])])),_:1},8,["active"]),0===r.stepActive?(m(),l(T,{key:0,model:r.form,rules:r.rules,onKeyup:d(j.save,["enter"]),"label-width":"15rem",ref:"form",size:"large"},{default:a((()=>[p(y,{modelValue:r.form.verifySmsCodeReq,"onUpdate:modelValue":o[0]||(o[0]=e=>r.form.verifySmsCodeReq=e),"code-field":["verifySmsCodeReq.code","code"],"code-label":e.$t("短信验证码"),"phone-field":["verifySmsCodeReq.destDevice","destDevice"],"phone-label":e.$t("手机号码"),"phone-place-holder":e.$t("手机号码"),vue:this,"form-name":"form"},null,8,["modelValue","code-label","phone-label","phone-place-holder"]),p(x,{label:e.$t("新密码"),prop:"passwordText"},{default:a((()=>[p(b,{modelValue:r.form.passwordText,"onUpdate:modelValue":o[1]||(o[1]=e=>r.form.passwordText=e),placeholder:e.$t("请输入新密码"),"show-password":""},null,8,["modelValue","placeholder"]),p(g,{modelValue:r.form.passwordText,"onUpdate:modelValue":o[2]||(o[2]=e=>r.form.passwordText=e)},null,8,["modelValue"]),n("div",h,u(e.$t("请输入包含英文、数字的8位以上密码")),1)])),_:1},8,["label"]),p(x,{label:e.$t("确认新密码"),prop:"passwordText2"},{default:a((()=>[p(b,{modelValue:r.form.passwordText2,"onUpdate:modelValue":o[3]||(o[3]=e=>r.form.passwordText2=e),placeholder:e.$t("请再一次输入新密码"),"show-password":""},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),p(x,null,{default:a((()=>[p($,{loading:r.loading,onClick:j.save,type:"primary"},{default:a((()=>[c(u(e.$t("提交")),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules","onKeyup"])):f("",!0),r.stepActive>=1?(m(),l(V,{key:1,"sub-title":e.$t("请牢记自己的新密码，返回登录后使用新密码登录"),title:e.$t("密码重置成功"),icon:"success"},{extra:a((()=>[p($,{onClick:j.backLogin,size:"large",type:"primary"},{default:a((()=>[c(u(e.$t("返回登录")),1)])),_:1},8,["onClick"])])),_:1},8,["sub-title","title"])):f("",!0)])),_:1},8,["title"])}]]);export{v as default};
