const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CQSv1pp1.js","./index-C3Re8InM.js","./@vue-_BCsYqm-.js","./element-plus-CoQd9HEf.js","./lodash-es-DCh--ulG.js","./@vueuse-DKZ1O7gq.js","./@element-plus-DpD46RjY.js","./@sxzz-CpAfbxx4.js","./@ctrl-D2oWfImC.js","./dayjs-Cud5yAXI.js","./async-validator-BTKOuuO-.js","./memoize-one-Ds0C_khL.js","./normalize-wheel-es-Vn5vHDCm.js","./@floating-ui-DT7V1Oc1.js","../css/element-plus-B3lJtvYm.css","./crypto-js-BfYQ37JU.js","./axios-DMXdiZgf.js","./vue-router-CJBOlWwF.js","./nprogress-BX4rmQ7W.js","../css/nprogress-BgDCIyLK.css","./vuex-CNGLPxA3.js","./json-bigint-D0bu8vFr.js","./bignumber.js-iDjSUVmj.js","./vue-i18n-DbMEmpqT.js","./@intlify-CZIS8eQd.js","./vue3-json-viewer-B-aZDOpp.js","../css/vue3-json-viewer-ByH33Jf7.css","./ace-builds-D9YH2WY7.js","./vue3-ace-editor-ubj-WOyx.js","./resize-observer-polyfill-CzGuHLZU.js","./sortablejs-BALiOaUQ.js","./vkbeautify-DEVEMlla.js","../css/index-CllpfDYF.css","./index-C0S2aaaZ.js","../css/index-dCvdPCc1.css"])))=>i.map(i=>d[i]);
import{_ as e,a as t}from"./index-C3Re8InM.js";import{aj as s,at as l,o as i,J as o,K as a,S as r,P as d,Q as m,O as u,L as n,c as p,a as f,aE as c}from"./@vue-_BCsYqm-.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-CJBOlWwF.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./sortablejs-BALiOaUQ.js";import"./vkbeautify-DEVEMlla.js";const b=c((()=>t((()=>import("./index-CQSv1pp1.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url))),g=c((()=>t((()=>import("./index-C0S2aaaZ.js")),__vite__mapDeps([33,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,34]),import.meta.url))),j={style:{margin:"1rem"}};const h=e({components:{naDept:b,scSelect:g},data(){return{form:{enabled:!0},loading:!0,mode:"add",rules:{userRegisterDeptId:[{required:!0,message:"请选择默认部门"}],userRegisterRoleId:[{required:!0,message:"请选择默认角色"}]},titleMap:{add:this.$t("新增配置"),edit:this.$t("编辑配置"),view:this.$t("查看配置")},visible:!1}},emits:["success","closed","mounted"],methods:{async open(e){var t;if(this.visible=!0,this.loading=!0,this.mode=e.mode,null==(t=e.row)?void 0:t.id){const t=await this.$API.sys_config.get.post({id:e.row.id});Object.assign(this.form,t.data)}return this.loading=!1,this},async submit(){if(!(await this.$refs.dialogForm.validate().catch((()=>{}))))return!1;this.loading=!0;const e="add"===this.mode?this.$API.sys_config.create:this.$API.sys_config.edit;try{const t=await e.post(this.form);this.$emit("success",t.data,this.mode),this.visible=!1,this.$message.success(this.$t("操作成功"))}catch{}this.loading=!1}},mounted(){this.$emit("mounted")}},[["render",function(e,t,c,b,g,h){var _;const v=s("scSelect"),y=s("el-form-item"),$=s("naDept"),R=s("el-switch"),V=s("el-collapse-item"),w=s("el-collapse"),I=s("el-form"),x=s("el-tab-pane"),D=s("JsonViewer"),P=s("el-tabs"),A=s("el-button"),k=s("scDialog"),C=l("loading");return i(),o(k,{modelValue:g.visible,"onUpdate:modelValue":t[5]||(t[5]=e=>g.visible=e),title:`${g.titleMap[g.mode]}：${(null==(_=g.form)?void 0:_.id)??"..."}`,onClosed:t[6]||(t[6]=t=>e.$emit("closed")),"destroy-on-close":""},{footer:a((()=>[r(A,{onClick:t[4]||(t[4]=e=>g.visible=!1)},{default:a((()=>[d(m(e.$t("取消")),1)])),_:1}),"view"!==g.mode?(i(),o(A,{key:0,disabled:g.loading,loading:g.loading,onClick:h.submit,type:"primary"},{default:a((()=>[d(m(e.$t("保存")),1)])),_:1},8,["disabled","loading","onClick"])):u("",!0)])),default:a((()=>[n((i(),p("div",null,[g.loading?u("",!0):(i(),o(P,{key:0,"tab-position":"top"},{default:a((()=>[r(x,{label:e.$t("基本信息")},{default:a((()=>[r(I,{disabled:"view"===g.mode,model:g.form,rules:g.rules,"label-width":"15rem",ref:"dialogForm"},{default:a((()=>[r(w,null,{default:a((()=>[r(V,{title:e.$t("用户注册设置"),name:"1"},{default:a((()=>[f("div",j,[r(y,{label:e.$t("默认角色"),prop:"userRegisterRoleId"},{default:a((()=>[r(v,{modelValue:g.form.userRegisterRoleId,"onUpdate:modelValue":t[0]||(t[0]=e=>g.form.userRegisterRoleId=e),config:{props:{label:"name",value:"id"}},"export-api":e.$API.sys_role.export,"query-api":e.$API.sys_role.query,clearable:"",filterable:"",style:{width:"15rem"}},null,8,["modelValue","export-api","query-api"])])),_:1},8,["label"]),r(y,{label:e.$t("默认部门"),prop:"userRegisterDeptId"},{default:a((()=>[r($,{modelValue:g.form.userRegisterDeptId,"onUpdate:modelValue":t[1]||(t[1]=e=>g.form.userRegisterDeptId=e),style:{width:"15rem"}},null,8,["modelValue"])])),_:1},8,["label"]),r(y,{label:e.$t("开启人工审核"),prop:"userRegisterConfirm"},{default:a((()=>[r(R,{modelValue:g.form.userRegisterConfirm,"onUpdate:modelValue":t[2]||(t[2]=e=>g.form.userRegisterConfirm=e)},null,8,["modelValue"])])),_:1},8,["label"])])])),_:1},8,["title"])])),_:1}),r(y,{label:e.$t("启用"),prop:"enabled"},{default:a((()=>[r(R,{modelValue:g.form.enabled,"onUpdate:modelValue":t[3]||(t[3]=e=>g.form.enabled=e)},null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["disabled","model","rules"])])),_:1},8,["label"]),"view"===g.mode?(i(),o(x,{key:0,label:e.$t("原始数据")},{default:a((()=>[r(D,{"expand-depth":5,theme:this.$TOOL.data.get("APP_SET_DARK")||this.$CONFIG.APP_SET_DARK?"dark":"light",value:g.form,copyable:"",expanded:"",sort:""},null,8,["theme","value"])])),_:1},8,["label"])):u("",!0)])),_:1}))])),[[C,g.loading]])])),_:1},8,["modelValue","title"])}],["__scopeId","data-v-3faf7393"]]);export{h as default};
