import{d as t}from"./vuedraggable-Db3f5-Q-.js";import{_ as s}from"./change-log-BZws38O0.js";import{_ as i}from"./chart-bar-jobrecord-DJHGDp_g.js";import{_ as o}from"./chart-bar-request-Cx_0moK7.js";import{_ as e}from"./chart-pie-jobrecord-DXUFErah.js";import{_ as l}from"./chart-pie-request-CIFuzgRm.js";import{_ as a}from"./modules-DmEYCBH9.js";import{_ as r}from"./ver-Cfz343y1.js";import{aq as n,aj as m,o as c,c as u,a as d,S as p,O as g,K as h,R as y,a7 as f,J as j,M as v,P as L,Q as _,F as k}from"./@vue-_BCsYqm-.js";import b from"./custom-layout-dialog-B46lPa83.js";import z from"./layout-CMhcGNds.js";import{_ as w}from"./index-C3Re8InM.js";import"./vue-Vf-7TWMk.js";import"./sortablejs-BALiOaUQ.js";import"./markdown-it-DZD2r4QH.js";import"./mdurl-DbZ9s47_.js";import"./uc.micro-CRGj88R_.js";import"./entities-D_unbCD7.js";import"./linkify-it-DVBmImI5.js";import"./punycode.js-H98b6B6Y.js";import"./markdown-it-emoji-B7iokhun.js";import"./chart-bar-CBcvcnsx.js";import"./index-BvrtFp_m.js";import"./echarts-CyqjNmzt.js";import"./tslib-ZseNXxlj.js";import"./zrender-DGOCqtJC.js";import"./chart-pie-Dgwiod7Z.js";import"./package-CG6dG16S.js";import"./logo-BrD2dTrf.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-CJBOlWwF.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./vkbeautify-DEVEMlla.js";const O={},$=Object.assign({"./change-log.vue":s,"./chart-bar-jobrecord.vue":i,"./chart-bar-request.vue":o,"./chart-pie-jobrecord.vue":e,"./chart-pie-request.vue":l,"./modules.vue":a,"./ver.vue":r});Object.keys($).forEach((t=>{let s=$[t];O[t.replace(/^\.\/(.*)\.\w+$/,"$1")]=s.default}));const C=n(O),G={class:"widgets-content"},S={class:"widgets",ref:"widgets"},D={class:"widgets-wrapper"},P={key:0,class:"no-widgets"},E={class:"widgets-item"},x={key:0,class:"customize-overlay"},T={key:0,class:"widgets-aside"},A={class:"widgets-aside-title"},I={class:"selectLayout"},R={class:"widgets-list"},q={key:0,class:"widgets-list-nodata"},H={class:"item-logo"},J={class:"item-info"},M={class:"item-actions"};const N=w({components:{draggable:t,customLayoutDialog:b,layout:z},data(){return{customizing:!1,allComps:C,selectLayout:[],defaultGrid:this.$CONFIG.APP_SET_HOME_GRID,grid:[],layouts:["12,6,6","24-12,12","24-16,8","24-24-24"],customLayouts:[],dialog:{}}},created(){const t=this.$GLOBAL.user.roles.filter((t=>t.displayDashboard)).sort(((t,s)=>s.id-t.id))[0].dashboardLayout;t&&(this.defaultGrid=JSON.parse(t)),this.loadGrid()},mounted(){this.$nextTick((()=>this.$emit("on-mounted")))},computed:{allCompsList(){const t=[];for(const i in this.allComps)t.push({key:i,title:C[i].title,icon:C[i].icon,description:C[i].description});const s=this.grid.compsList.reduce((function(t,s){return t.concat(s)}));for(let i of t){s.find((t=>t===i.key))&&(i.disabled=!0)}return t},myCompsList(){const t=this.$TOOL.data.get("DASHBOARD_GRID");return this.allCompsList.filter((s=>!s.disabled&&!(null==t?void 0:t.includes(s.key))))},nowCompsList(){return this.grid.compsList.reduce((function(t,s){return t.concat(s)}))}},methods:{custom(){this.customizing=!this.customizing;const t=this.$refs.widgets.offsetWidth;this.$nextTick((()=>{const s=this.$refs.widgets.offsetWidth/t;this.$refs.widgets.style.setProperty("transform",`scale(${this.customizing?s:1})`)})),this.$emit("on-customizing",this.customizing)},setLayout(t){this.grid.layout=t,t.forEach(((t,s)=>{this.grid.compsList[s]||(this.grid.compsList[s]=[])})),"24"===t.join(",")&&(this.grid.compsList[0]=[...this.grid.compsList[0],...this.grid.compsList[1],...this.grid.compsList[2]],this.grid.compsList[1]=[],this.grid.compsList[2]=[])},push(t){this.grid.compsList[0].push(t.key)},remove(t){const s=this.grid.compsList;s.forEach(((i,o)=>{s[o]=i.filter((s=>s!==t))}))},save(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.$TOOL.data.set("APP_SET_HOME_GRID",this.grid),this.$emit("on-customizing",this.customizing)},backDefault(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.grid=JSON.parse(JSON.stringify(this.defaultGrid)),this.$TOOL.data.remove("APP_SET_HOME_GRID"),this.$emit("on-customizing",this.customizing)},close(){this.customizing=!1,this.$refs.widgets.style.removeProperty("transform"),this.loadGrid(),this.$emit("on-customizing",this.customizing)},loadGrid(){this.grid=this.$TOOL.data.get("APP_SET_HOME_GRID")||JSON.parse(JSON.stringify(this.defaultGrid))}}},[["render",function(t,s,i,o,e,l){const a=m("el-empty"),r=m("el-button"),n=m("el-icon"),b=m("draggable"),z=m("el-col"),w=m("el-row"),O=m("el-icon-circle-plus-filled"),$=m("el-icon-close"),C=m("el-header"),N=m("layout"),V=m("el-main"),B=m("el-footer"),F=m("el-container"),U=m("el-icon-setting"),Q=m("custom-layout-dialog");return c(),u(y,null,[d("div",{class:k(["widgets-home",e.customizing?"customizing":""]),ref:"main"},[d("div",G,[d("div",S,[d("div",D,[l.nowCompsList.length<=0?(c(),u("div",P,[p(a,{description:t.$t("没有部件啦"),"image-size":280},null,8,["description"])])):g("",!0),p(w,{gutter:15},{default:h((()=>[(c(!0),u(y,null,f(e.grid.layout,((t,s)=>(c(),j(z,{key:s,md:t,xs:24},{default:h((()=>[p(b,{modelValue:e.grid.compsList[s],"onUpdate:modelValue":t=>e.grid.compsList[s]=t,animation:"200",class:"draggable-box",dragClass:"aaaaa",fallbackOnBody:"","force-fallback":"",group:"people",handle:".customize-overlay","item-key":"com"},{item:h((({element:t})=>[d("div",E,[(c(),j(v(e.allComps[t]))),e.customizing?(c(),u("div",x,[p(r,{onClick:s=>l.remove(t),class:"close",icon:"el-icon-close",plain:"",size:"small",type:"danger"},null,8,["onClick"]),d("label",null,[p(n,null,{default:h((()=>[(c(),j(v(e.allComps[t].icon)))])),_:2},1024),L(" "+_(e.allComps[t].title),1)])])):g("",!0)])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["md"])))),128))])),_:1})])],512)]),e.customizing?(c(),u("div",T,[p(F,null,{default:h((()=>[p(C,null,{default:h((()=>[d("div",A,[p(n,null,{default:h((()=>[p(O)])),_:1}),s[7]||(s[7]=L(" 添加部件 "))]),d("div",null,[e.customizing?(c(),j(r,{key:0,onClick:l.save,icon:"el-icon-check",round:"",type:"primary"},{default:h((()=>[L(_(t.$t("完成")),1)])),_:1},8,["onClick"])):g("",!0)]),d("div",{onClick:s[0]||(s[0]=t=>l.close()),class:"widgets-aside-close"},[p(n,null,{default:h((()=>[p($)])),_:1})])])),_:1}),p(C,{style:{height:"auto"}},{default:h((()=>[d("div",I,[(c(!0),u(y,null,f(e.layouts,(t=>(c(),j(N,{active:e.grid.layout.join(",")===t.replaceAll("-",","),layout:t,onOnSetLayout:l.setLayout},null,8,["active","layout","onOnSetLayout"])))),256)),(c(!0),u(y,null,f(e.customLayouts,(t=>(c(),j(N,{active:e.grid.layout.join(",")===t.replaceAll("-",","),layout:t,onOnSetLayout:l.setLayout},null,8,["active","layout","onOnSetLayout"])))),256))])])),_:1}),p(C,{style:{height:"auto"}},{default:h((()=>[p(r,{onClick:s[1]||(s[1]=t=>this.dialog.customLayout={title:"添加自定义布局"}),style:{margin:"0 auto"}},{default:h((()=>s[8]||(s[8]=[L("添加自定义布局")]))),_:1})])),_:1}),p(V,{class:"nopadding"},{default:h((()=>[d("div",R,[l.myCompsList.length<=0?(c(),u("div",q,[p(a,{description:t.$t("没有部件啦"),"image-size":60},null,8,["description"])])):g("",!0),(c(!0),u(y,null,f(l.myCompsList,(t=>(c(),u("div",{key:t.title,class:"widgets-list-item"},[d("div",H,[p(n,null,{default:h((()=>[(c(),j(v(t.icon)))])),_:2},1024)]),d("div",J,[d("h2",null,_(t.title),1),d("p",null,_(t.description),1)]),d("div",M,[p(r,{onClick:s=>l.push(t),icon:"el-icon-plus",size:"small",type:"primary"},null,8,["onClick"])])])))),128))])])),_:1}),p(B,null,{default:h((()=>[p(r,{onClick:s[2]||(s[2]=t=>l.backDefault()),size:"small"},{default:h((()=>[L(_(t.$t("恢复默认")),1)])),_:1})])),_:1})])),_:1})])):g("",!0)],2),d("div",{onClick:s[3]||(s[3]=(...t)=>l.custom&&l.custom(...t)),class:"layout-setting"},[p(n,null,{default:h((()=>[p(U)])),_:1})]),e.dialog.customLayout?(c(),j(Q,{key:0,onClosed:s[4]||(s[4]=t=>e.dialog.customLayout=null),onMounted:s[5]||(s[5]=s=>t.$refs.customLayoutDialog.open(e.dialog.customLayout)),onOnCustomLayout:s[6]||(s[6]=t=>e.customLayouts=[t]),ref:"customLayoutDialog"},null,512)):g("",!0)],64)}],["__scopeId","data-v-71176bd6"]]);export{N as default};
