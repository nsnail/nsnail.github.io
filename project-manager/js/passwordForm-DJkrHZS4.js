import{o as e,J as o,K as t,S as s,P as r,Q as a,a as i,a8 as l,aj as n}from"./@vue-_BCsYqm-.js";import{_ as u}from"./index-Bx7rElEd.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-DP39kmEB.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./sortablejs-BALiOaUQ.js";import"./vkbeautify-DEVEMlla.js";const d={class:"login-reg"};const m=u({data(){return{starred:!1,autoLogin:!1,form:{account:"root",password:"1234qwer"},rules:{account:[{required:!0,message:this.$t("请输入用户名"),trigger:"blur"}],password:[{required:!0,message:this.$t("请输入密码"),trigger:"blur"}]},isLoading:!1}},watch:{autoLogin(e){this.$TOOL.data.set("AUTO_LOGIN",e)}},mounted(){this.autoLogin=this.$TOOL.data.get("AUTO_LOGIN")||!1},methods:{async login(){if(!this.starred)return window.open("https://github.com/nsnail/NetAdmin"),void(this.starred=!0);if(!(await this.$refs.loginForm.validate().catch((()=>{}))))return!1;this.isLoading=!0;try{await this.$API.sys_user.loginByPwd.post(this.form)}catch{return this.isLoading=!1,!1}const e=this.$TOOL.data.get("LOGIN_REDIRECT")??"/";await this.$TOOL.data.remove("LOGIN_REDIRECT"),window.location.href=e}}},[["render",function(u,m,p,c,g,f){const j=n("el-input"),h=n("el-form-item"),w=n("el-checkbox"),b=n("el-col"),y=n("router-link"),L=n("el-button"),$=n("el-form");return e(),o($,{model:g.form,rules:g.rules,onKeyup:l(f.login,["enter"]),"label-width":"0",ref:"loginForm",size:"large"},{default:t((()=>[s(h,{prop:"account"},{default:t((()=>[s(j,{modelValue:g.form.account,"onUpdate:modelValue":m[0]||(m[0]=e=>g.form.account=e),placeholder:u.$t("用户名 / 手机 / 邮箱"),clearable:"","prefix-icon":"el-icon-user"},null,8,["modelValue","placeholder"])])),_:1}),s(h,{prop:"password"},{default:t((()=>[s(j,{modelValue:g.form.password,"onUpdate:modelValue":m[1]||(m[1]=e=>g.form.password=e),placeholder:u.$t("请输入密码"),clearable:"","prefix-icon":"el-icon-lock","show-password":""},null,8,["modelValue","placeholder"])])),_:1}),s(h,{style:{"margin-bottom":"1rem"}},{default:t((()=>[s(b,{span:12},{default:t((()=>[s(w,{modelValue:g.autoLogin,"onUpdate:modelValue":m[2]||(m[2]=e=>g.autoLogin=e),label:u.$t("24小时免登录")},null,8,["modelValue","label"])])),_:1}),s(b,{span:12,class:"login-forgot"},{default:t((()=>[s(y,{to:"/guest/reset-password"},{default:t((()=>[r(a(u.$t("忘记密码？")),1)])),_:1})])),_:1})])),_:1}),s(h,null,{default:t((()=>[s(L,{loading:g.isLoading,onClick:f.login,round:"",style:{width:"100%"},type:"primary"},{default:t((()=>[r(a(g.starred?u.$t("登录"):u.$t("Star 后可登录")),1)])),_:1},8,["loading","onClick"])])),_:1}),i("div",d,[r(a(u.$t("还没有账号？"))+" ",1),s(y,{to:"/guest/register"},{default:t((()=>[r(a(u.$t("创建新账号")),1)])),_:1})])])),_:1},8,["model","rules","onKeyup"])}]]);export{m as default};
