import{a as e}from"./naFormPhone-CyipBbfe.js";import{_ as i}from"./index-Bx7rElEd.js";import{aj as a,o as l,c as s,S as t,K as r,a as o,P as d,Q as m,O as p,R as c}from"./@vue-_BCsYqm-.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-DP39kmEB.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./sortablejs-BALiOaUQ.js";import"./vkbeautify-DEVEMlla.js";const n={class:"msg-yzm"},u={key:0};const y=i({emits:[],props:{modelValue:{type:Object},vue:{type:Object},formName:{type:String},emailPlaceHolder:{type:String},emailField:{type:Object},codeField:{type:Object},emailLabel:{type:String},codeLabel:{type:String}},data:()=>({sendDisabled:!1,waitSecs:0,loading:!1,form:{}}),watch:{form:{deep:!0,handler(e){this.$emit("update:modelValue",e)}},modelValue:{immediate:!0,deep:!0,handler(e){this.form=e??{}}}},mounted(){},created(){},components:{naVerify:e},computed:{},methods:{async captchaSuccess(e){this.sendDisabled=!0;try{await this.$API.sys_verifycode.sendVerifyCode.post({destDevice:this.form[Array.isArray(this.emailField)?this.emailField[1]:this.emailField],type:"login",deviceType:"email",verifyCaptchaReq:e}),this.$message.success(this.$t("发送成功")),this.waitSecs=60;const i=setInterval((()=>{this.waitSecs-=1,this.waitSecs<1&&(clearInterval(i),this.sendDisabled=!1,this.waitSecs=0)}),1e3)}catch{this.loading=!1}},async getYzm(){if(!(await this.vue.$refs[this.formName].validateField(Array.isArray(this.emailField)?this.emailField[0]:this.emailField).catch((()=>{}))))return!1;this.$refs.verify.show()}}},[["render",function(e,i,y,h,j,f){const b=a("el-input"),v=a("el-form-item"),F=a("el-button"),g=a("na-verify");return l(),s(c,null,[t(v,{label:y.emailLabel,prop:Array.isArray(y.emailField)?y.emailField[0]:y.emailField},{default:r((()=>[t(b,{modelValue:j.form[Array.isArray(y.emailField)?y.emailField[1]:y.emailField],"onUpdate:modelValue":i[0]||(i[0]=e=>j.form[Array.isArray(y.emailField)?y.emailField[1]:y.emailField]=e),placeholder:y.emailPlaceHolder,clearable:"",maxlength:"32",oninput:"value=value.replace(/[^A-Za-z0-9.@_]/g,'')","prefix-icon":"el-icon-link"},null,8,["modelValue","placeholder"])])),_:1},8,["label","prop"]),t(v,{label:y.codeLabel,prop:Array.isArray(y.codeField)?y.codeField[0]:y.codeField},{default:r((()=>[o("div",n,[t(b,{modelValue:j.form[Array.isArray(y.codeField)?y.codeField[1]:y.codeField],"onUpdate:modelValue":i[1]||(i[1]=e=>j.form[Array.isArray(y.codeField)?y.codeField[1]:y.codeField]=e),placeholder:e.$t("邮箱验证码"),clearable:"",maxlength:"4",oninput:"value=value.replace(/\\D/g,'')","prefix-icon":"el-icon-message"},null,8,["modelValue","placeholder"]),t(F,{disabled:j.sendDisabled,onClick:f.getYzm},{default:r((()=>[d(m(e.$t("获取验证码")),1),j.sendDisabled?(l(),s("span",u," ("+m(j.waitSecs)+")",1)):p("",!0)])),_:1},8,["disabled","onClick"])])])),_:1},8,["label","prop"]),t(g,{explain:e.$t("向右滑动完成验证"),imgSize:{width:"310px",height:"155px"},onSuccess:f.captchaSuccess,captchaType:"blockPuzzle",mode:"pop",ref:"verify"},null,8,["explain","onSuccess"])],64)}],["__scopeId","data-v-9004404b"]]);export{y as default};
