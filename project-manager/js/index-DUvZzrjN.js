const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./save-a7B_x0w3.js","./index-C3Re8InM.js","./@vue-_BCsYqm-.js","./element-plus-CoQd9HEf.js","./lodash-es-DCh--ulG.js","./@vueuse-DKZ1O7gq.js","./@element-plus-DpD46RjY.js","./@sxzz-CpAfbxx4.js","./@ctrl-D2oWfImC.js","./dayjs-Cud5yAXI.js","./async-validator-BTKOuuO-.js","./memoize-one-Ds0C_khL.js","./normalize-wheel-es-Vn5vHDCm.js","./@floating-ui-DT7V1Oc1.js","../css/element-plus-B3lJtvYm.css","./crypto-js-BfYQ37JU.js","./axios-DMXdiZgf.js","./vue-router-CJBOlWwF.js","./nprogress-BX4rmQ7W.js","../css/nprogress-BgDCIyLK.css","./vuex-CNGLPxA3.js","./json-bigint-D0bu8vFr.js","./bignumber.js-iDjSUVmj.js","./vue-i18n-DbMEmpqT.js","./@intlify-CZIS8eQd.js","./vue3-json-viewer-B-aZDOpp.js","../css/vue3-json-viewer-ByH33Jf7.css","./ace-builds-D9YH2WY7.js","./vue3-ace-editor-ubj-WOyx.js","./resize-observer-polyfill-CzGuHLZU.js","./sortablejs-BALiOaUQ.js","./vkbeautify-DEVEMlla.js","../css/index-CllpfDYF.css"])))=>i.map(i=>d[i]);
import{_ as e,a as t}from"./index-C3Re8InM.js";import{aj as a,at as o,o as i,c as s,S as l,K as d,L as r,J as n,a as c,Q as m,Y as p,P as u,O as f,R as g,aE as h}from"./@vue-_BCsYqm-.js";import j from"./index-gneQvbGP.js";import"./element-plus-CoQd9HEf.js";import"./lodash-es-DCh--ulG.js";import"./@vueuse-DKZ1O7gq.js";import"./@element-plus-DpD46RjY.js";import"./@sxzz-CpAfbxx4.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-Cud5yAXI.js";import"./async-validator-BTKOuuO-.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-DT7V1Oc1.js";import"./crypto-js-BfYQ37JU.js";import"./axios-DMXdiZgf.js";import"./vue-router-CJBOlWwF.js";import"./nprogress-BX4rmQ7W.js";import"./vuex-CNGLPxA3.js";import"./json-bigint-D0bu8vFr.js";import"./bignumber.js-iDjSUVmj.js";import"./vue-i18n-DbMEmpqT.js";import"./@intlify-CZIS8eQd.js";import"./vue3-json-viewer-B-aZDOpp.js";import"./ace-builds-D9YH2WY7.js";import"./vue3-ace-editor-ubj-WOyx.js";import"./resize-observer-polyfill-CzGuHLZU.js";import"./sortablejs-BALiOaUQ.js";import"./vkbeautify-DEVEMlla.js";const y=h((()=>t((()=>import("./save-a7B_x0w3.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32]),import.meta.url))),v={class:"custom-tree-node"},_={class:"btn"};const k=e({components:{list:j,saveDialog:y},computed:{},created(){},data(){return{data:[],dialog:{},filterText:"",form:{},loading:!1,query:{dynamicFilter:{filters:[]},filter:{},keywords:this.keywords}}},inject:["reload"],methods:{async getData(){this.loading=!0;const e=await this.$API.sys_doc.queryCatalog.post({prop:"name",order:"ascending"});this.loading=!1,this.data=e.data,this.data.length>0&&(await this.$nextTick(),this.$refs.doc.setCurrentKey(this.data[0].id),this.form.catalogId=this.data[0].id)},filterNode(e,t){if(!e)return!0;return-1!==(t.name+t.code).indexOf(e)},async add(e,t){this.dialog.save={mode:"add",data:{catalogId:e,code:t?t+">":""}}},async edit(e){this.dialog.save={mode:"edit",row:e}},click(e){this.form.catalogId=e.id},async del(e){this.loading=!0;try{await this.$API.sys_doc.deleteCatalog.post({id:e.id}),this.$message.success(this.$t("操作成功"))}catch{}this.loading=!1,await this.getData()}},mounted(){this.getData()},props:["keywords"],watch:{filterText(e){this.$refs.doc.filter(e)}}},[["render",function(e,t,h,j,y,k){const b=a("el-input"),w=a("el-header"),x=a("el-button"),C=a("el-popconfirm"),I=a("el-button-group"),$=a("el-tree"),D=a("el-main"),z=a("el-footer"),T=a("el-container"),E=a("el-aside"),N=a("list"),P=a("save-dialog"),V=o("loading");return i(),s(g,null,[l(T,null,{default:d((()=>[r((i(),n(E,{width:"40rem"},{default:d((()=>[l(T,null,{default:d((()=>[l(w,null,{default:d((()=>[l(b,{modelValue:y.filterText,"onUpdate:modelValue":t[0]||(t[0]=e=>y.filterText=e),placeholder:e.$t("输入关键字进行过滤"),clearable:""},null,8,["modelValue","placeholder"])])),_:1}),l(D,{class:"nopadding"},{default:d((()=>[l($,{data:y.data,"expand-on-click-node":!1,"filter-node-method":k.filterNode,"highlight-current":!0,props:{label:"name"},onNodeClick:k.click,"default-expand-all":"","node-key":"id",ref:"doc"},{default:d((({_:t,data:a})=>[c("div",v,[c("span",null,m(a.name)+" "+m(a.code),1),c("span",_,[l(I,{size:"small"},{default:d((()=>[l(x,{onClick:p((e=>k.add(a.id,a.code)),["stop"]),icon:"el-icon-plus"},null,8,["onClick"]),l(x,{onClick:p((e=>k.edit(a)),["stop"]),icon:"el-icon-edit"},null,8,["onClick"]),l(C,{title:e.$t("确定删除 {item} 吗？",{item:a.name}),onConfirm:e=>k.del(a),width:"20rem"},{reference:d((()=>[l(x,{onClick:p((()=>{}),["stop"]),icon:"el-icon-delete"})])),_:2},1032,["title","onConfirm"])])),_:2},1024)])])])),_:1},8,["data","filter-node-method","onNodeClick"])])),_:1}),l(z,null,{default:d((()=>[l(x,{onClick:t[1]||(t[1]=e=>k.add(y.form.catalogId)),icon:"el-icon-plus",size:"small",style:{width:"100%"},type:"primary"},{default:d((()=>[u(m(e.$t("文档分类")),1)])),_:1})])),_:1})])),_:1})])),_:1})),[[V,y.loading]]),l(N,{catalogId:y.form.catalogId},null,8,["catalogId"])])),_:1}),y.dialog.save?(i(),n(P,{key:0,onClosed:t[2]||(t[2]=e=>y.dialog.save=null),onMounted:t[3]||(t[3]=t=>e.$refs.saveDialog.open(y.dialog.save)),onSuccess:t[4]||(t[4]=(e,t)=>k.getData()),ref:"saveDialog"},null,512)):f("",!0)],64)}],["__scopeId","data-v-e925b22b"]]);export{k as default};
